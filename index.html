<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Garagem Vmuka-Car Est√©tica Automotiva</title>

<link rel="manifest" href="manifest.json">
<link rel="icon" sizes="192x192" href="icon192.png">
<link rel="icon" sizes="512x512" href="icon512.png">
<meta name="theme-color" content="#00bfff">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: url("logo.png") no-repeat center center fixed;
  background-size: 650px;
  background-color: #000;
  color: white;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  z-index: -1;
}

.container {
  max-width: 420px;
  margin: 40px auto;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(5px);
  padding: 25px;
  border-radius: 25px;
  box-shadow: 0 0 30px rgba(0,200,255,0.5);
}

h1 {
  text-align: center;
  color: #00cfff;
}

.sub {
  text-align: center;
  font-size: 14px;
  margin-bottom: 20px;
}

input, select {
  width: 100%;
  padding: 12px;
  margin: 8px 0;
  border-radius: 12px;
  border: none;
  background: rgba(255,255,255,0.15);
  color: white;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 15px;
  border-radius: 12px;
  border: none;
  background: #00cfff;
  color: black;
  font-weight: bold;
  cursor: pointer;
}

button.loading {
  opacity: 0.6;
  pointer-events: none;
}
</style>
</head>

<body>

<div class="container">

<h1>Garagem Vmuka-Car</h1>
<p class="sub">Atendimento de Segunda a S√°bado at√© 18:00 üöó‚ú®</p>

<input type="text" id="nome" placeholder="Seu nome completo">
<input type="tel" id="telefone" placeholder="Seu telefone">
<input type="text" id="veiculo" placeholder="Modelo do ve√≠culo">

<label>Escolha o servi√ßo:</label>
<select id="servico" onchange="mostrarDetalhes()">
  <option value="">Selecione</option>
  <option value="lavagem">Lavagem</option>
  <option value="polimento">Polimento</option>
  <option value="higienizacao">Higieniza√ß√£o Interna</option>
</select>

<div id="detalhesServico"></div>

<select id="dia">
<option value="">Selecione o dia</option>
<option>Segunda-feira</option>
<option>Ter√ßa-feira</option>
<option>Quarta-feira</option>
<option>Quinta-feira</option>
<option>Sexta-feira</option>
<option>S√°bado</option>
</select>

<select id="horario">
<option value="">Selecione o hor√°rio</option>
<option>08:00</option>
<option>09:00</option>
<option>10:00</option>
<option>11:00</option>
<option>13:00</option>
<option>14:00</option>
<option>15:00</option>
<option>16:00</option>
<option>17:00</option>
<option>18:00</option>
</select>

<button id="btnAgendar" onclick="enviarWhatsApp()">Confirmar Agendamento</button>

</div>

<<script>

const precosBase = {
  "Lavagem Simples": 40,
  "Lavagem Premium": 80,
  "Polimento T√©cnico": 350,
  "Polimento + Vitrifica√ß√£o": 900,
  "Higieniza√ß√£o Bancos": 150,
  "Higieniza√ß√£o Completa": 300
};

const multiplicadorTamanho = {
  "Pequeno": 1,
  "M√©dio": 1.25,
  "Grande": 1.5
};

const checkboxes = document.querySelectorAll("#servicos input[type='checkbox']");
checkboxes.forEach(cb => cb.addEventListener("change", calcularTotal));

document.getElementById("tamanho")?.addEventListener("change", calcularTotal);

function calcularTotal() {
  const tamanho = document.getElementById("tamanho").value;
  let total = 0;

  const selecionados = document.querySelectorAll("#servicos input[type='checkbox']:checked");

  selecionados.forEach(item => {
    const nomeServico = item.value.split("-")[0].trim();
    const precoBase = precosBase[nomeServico];
    const multiplicador = multiplicadorTamanho[tamanho] || 1;

    total += precoBase * multiplicador;
  });

  if (selecionados.length >= 2) {
    total = total * 0.95; // 5% desconto
  }

  document.getElementById("totalValor").innerText = 
    "Total: R$" + total.toFixed(2);
}

function enviarWhatsApp() {

  const botao = document.getElementById("btnAgendar");
  botao.classList.add("loading");
  botao.innerText = "Enviando...";

  const nome = document.getElementById("nome").value;
  const telefone = document.getElementById("telefone").value;
  const veiculo = document.getElementById("veiculo").value;
  const tamanho = document.getElementById("tamanho").value;
  const dia = document.getElementById("dia").value;
  const horario = document.getElementById("horario").value;

  const selecionados = document.querySelectorAll("#servicos input[type='checkbox']:checked");

  if (!nome || !telefone || !veiculo || !tamanho || selecionados.length === 0 || !dia || !horario) {
    alert("Preencha todos os campos");
    botao.classList.remove("loading");
    botao.innerText = "Confirmar Agendamento";
    return;
  }

  let listaServicos = "";
  let total = 0;

  selecionados.forEach(item => {
    const nomeServico = item.value.split("-")[0].trim();
    const precoBase = precosBase[nomeServico];
    const multiplicador = multiplicadorTamanho[tamanho];

    const precoFinal = precoBase * multiplicador;
    total += precoFinal;

    listaServicos += `- ${nomeServico} (R$${precoFinal.toFixed(2)})\n`;
  });

  let desconto = 0;
  if (selecionados.length >= 2) {
    desconto = total * 0.05;
    total = total * 0.95;
  }

  const mensagem =
`üöó NOVO AGENDAMENTO üöó

Nome: ${nome}
Telefone: ${telefone}
Ve√≠culo: ${veiculo}
Tamanho: ${tamanho}

Servi√ßos:
${listaServicos}

Desconto: R$${desconto.toFixed(2)}
Total Final: R$${total.toFixed(2)}

Dia: ${dia}
Hor√°rio: ${horario}`;

  const numero = "5519991984539";
  const url = `https://wa.me/${numero}?text=${encodeURIComponent(mensagem)}`;

  setTimeout(() => {
    window.open(url, "_blank");
    botao.classList.remove("loading");
    botao.innerText = "Confirmar Agendamento";
  }, 800);
}

</script>
